<?xml version="1.0" encoding="UTF-8"?>
<Module>
	<ModulePrefs title="Gifts">
		<Require feature="opensocial-0.8"/>
		<Require feature="dynamic-height"/>
	</ModulePrefs>
	<Content type="html">
		<![CDATA[
	    
	    <script>
  	    // Sends a signed makeRequest to a specified remote server to load the iframe
  	    function sendSignedRequest(server) {
  	      var params = {};
          params[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.SIGNED;
          params["OAUTH_SERVICE_NAME"] = "HMAC";  //This is the critical part which forces the use of HMAC
          params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.JSON;
          params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.POST;
          
          gadgets.io.makeRequest(server, displayFrame, params);
  	    };
  	    
        // Opens the returned iframe
        function displayFrame(response) {
          document.getElementById('frame').innerHTML = response.text;
          gadgets.window.adjustHeight();
        };
        
        // Initiates the signed request that creates the iframe
        function init() {
          sendSignedRequest('index.php')
        }
      
        gadgets.util.registerOnLoadHandler(init);
	    </script>
  	  <div id='frame'></div>
	  ]]>
	</Content>
</Module>
